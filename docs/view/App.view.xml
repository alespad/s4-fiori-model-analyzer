<mvc:View controllerName="s4.fiori.model.analyzer.view.App"
  xmlns:mvc="sap.ui.core.mvc"
  xmlns:core="sap.ui.core"
  xmlns="sap.m"
  xmlns:t="sap.ui.table">
  <App>
    <Page>
      <customHeader>
        <Bar class="sapUiSmallMarginBegin">
          <contentMiddle>
            <Title text="Fiori Programming Model Analyzer for S/4HANA" level="H2"/>
          </contentMiddle>
        </Bar>
      </customHeader>

      <VBox class="sapUiSmallMargin">
        <!-- Preview Notice Banner -->
        <MessageStrip text="Preview Release. This analyzer is being showcased at SAP Inside Track Rome 2025. Results are preliminary and subject to refinement." type="Information" showIcon="true" class="sapUiMediumMarginBottom">
        </MessageStrip>

        <Toolbar class="sapUiTinyMarginBottom">
          <Label text="Source:"/>
          <Select id="selSource" change="onSourceChange" width="260px" items="{path: '/sources'}">
            <core:Item key="{file}" text="{label}" />
          </Select>
          <ToolbarSpacer width="1rem"/>
          <Label text="Fiori ID:"/>
          <Input id="inpFioriId" liveChange="onFilter" width="150px"/>
          <ToolbarSpacer width="1rem"/>
          <Label text="App Name:"/>
          <Input id="inpAppName" liveChange="onFilter" width="200px"/>
          <ToolbarSpacer width="1rem"/>
          <Label text="Prog. Model:"/>
          <Select id="selProgModel" change="onFilter" width="150px">
            <core:Item key="" text="All"/>
            <core:Item key="N/A" text="N/A"/>
            <core:Item key="BOPF" text="BOPF"/>
            <core:Item key="RAP" text="RAP"/>
          </Select>
          <ToolbarSpacer width="1rem"/>
          <Label text="Entity:"/>
          <Input id="inpEntity" liveChange="onFilter" width="180px"/>
          <ToolbarSpacer width="1rem"/>
          <Button text="Clear" press="onClear"/>
        </Toolbar>

        <t:Table id="tbl" rows="{ path: '/' }" selectionMode="None" visibleRowCount="10" rowHeight="33" enableBusyIndicator="true" enableColumnReordering="true" width="100%">

          <t:columns>
            <t:Column width="110px" sortProperty="fioriId" filterProperty="fioriId">
              <Label text="Fiori ID"/>
              <t:template>
                <Text text="{fioriId}"/>
              </t:template>
            </t:Column>

            <t:Column width="280px" sortProperty="appName" filterProperty="appName">
              <Label text="App Name"/>
              <t:template>
                <Text text="{appName}" wrapping="false"/>
              </t:template>
            </t:Column>

            <t:Column width="150px" sortProperty="programmingModel" filterProperty="programmingModel">
              <Label text="Prog. Model"/>
              <t:template>
                <Text text="{programmingModel}"/>
              </t:template>
            </t:Column>

            <t:Column width="260px" sortProperty="businessEntity" filterProperty="businessEntity">
              <Label text="Entity"/>
              <t:template>
                <Text text="{businessEntity}" wrapping="false"/>
              </t:template>
            </t:Column>

            <t:Column width="260px" sortProperty="segwProject" filterProperty="segwProject">
              <Label text="SEGW Project"/>
              <t:template>
                <Text text="{segwProject}" wrapping="false"/>
              </t:template>
            </t:Column>

            <t:Column width="140px" hAlign="Center" sortProperty="fpmExtended" filterProperty="fpmExtended">
              <Label text="FPM Extended"/>
              <t:template>
                <ObjectStatus text="{fpmExtended}" state="{= ${fpmExtended} === 'Yes' ? 'Success' : ${fpmExtended} === 'No' ? 'Error' : 'None' }"/>
              </t:template>
            </t:Column>

            <t:Column width="120px" hAlign="Center">
              <Label text="Fiori Library"/>
              <t:template>
                <Link text="Open" href="{libraryLink}" target="_blank"/>
              </t:template>
            </t:Column>
          </t:columns>
        </t:Table>
      </VBox>


      <footer>
        <Toolbar>
          <Link text="View on GitHub" href="https://github.com/alespad/s4-fiori-model-analyzer" target="_blank"/>
          <ToolbarSpacer/>
          <Text text="Independent community project - Not affiliated with SAP SE"/>
        </Toolbar>
      </footer>
    </Page>
  </App>
</mvc:View>